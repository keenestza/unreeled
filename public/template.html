<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UNREELED — Daily Media Releases</title>
<meta name="description" content="Track daily releases across movies, TV, books, games, anime and music.">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'><rect width='32' height='32' rx='6' fill='%23ff6b35'/><text x='8' y='24' font-size='22' font-weight='bold' fill='white'>U</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#08090c;--card:#0f1014;--el:#16171d;--hov:#1c1d25;--accent:#ff6b35;--agl:rgba(255,107,53,0.12);--text:#e8e8ec;--ts:#a0a0ae;--td:#5e5e6e;--brd:#1e1f28;--bl:#282935;--sl:#3ec98c;--slb:rgba(62,201,140,0.08);--slr:rgba(62,201,140,0.25);--sm:#f0c038;--smb:rgba(240,192,56,0.08);--smr:rgba(240,192,56,0.25);--sh:#ef4444;--shb:rgba(239,68,68,0.08);--shr:rgba(239,68,68,0.25)}
body{background:var(--bg);color:var(--text);font-family:'Outfit',sans-serif;-webkit-font-smoothing:antialiased}
::selection{background:var(--accent);color:#fff}
button{cursor:pointer;font-family:inherit;border:none;background:none}
.nav{position:sticky;top:0;z-index:1000;height:56px;padding:0 24px;display:flex;align-items:center;justify-content:space-between;background:rgba(8,9,12,0.92);backdrop-filter:blur(24px);border-bottom:1px solid var(--brd)}
.nav-l{display:flex;align-items:center;gap:20px}
.logo{display:flex;align-items:center;gap:8px;cursor:pointer}
.logo i{width:26px;height:26px;background:var(--accent);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:800;color:#fff;font-style:normal}
.logo span{font-family:'Fraunces',serif;font-size:19px;font-weight:700;letter-spacing:-0.5px}
.tabs{display:flex;gap:2px}
.tab{padding:5px 11px;font-size:12.5px;font-weight:500;color:var(--td);border-radius:6px;transition:all .15s}
.tab:hover{color:var(--ts);background:var(--el)}
.tab.on{color:var(--text);background:var(--el)}
.btn-a{padding:6px 15px;background:var(--accent);border-radius:6px;color:#fff;font-size:12.5px;font-weight:600}
.page{display:none;max-width:920px;margin:0 auto;padding:28px 20px 60px}.page.on{display:block}
h1.hero{font-family:'Fraunces',serif;font-size:32px;font-weight:700;letter-spacing:-1.5px;margin-bottom:4px}
.sub{color:var(--td);font-size:14px;margin-bottom:22px}.sub b{color:var(--accent);font-weight:600}
/* DATE PICKER */
.dp{display:flex;align-items:center;gap:8px;margin-bottom:6px;flex-wrap:wrap}
.dp-btn{padding:6px 11px;background:var(--card);border:1px solid var(--brd);border-radius:7px;color:var(--td);font-size:13px;font-weight:500;transition:all .15s}
.dp-btn:hover{border-color:var(--bl);color:var(--text)}
.dp select{background:var(--card);border:1px solid var(--brd);border-radius:7px;color:var(--text);padding:6px 10px;font-size:13px;font-family:inherit;outline:none;cursor:pointer;max-width:220px}
.dp select:focus{border-color:var(--accent)}
.dp-single{font-size:13px;color:var(--ts)}
/* FILTERS */
.fbar{display:flex;gap:6px;margin-bottom:22px;flex-wrap:wrap}
.fc{padding:5px 12px;border-radius:100px;font-size:12px;font-weight:500;background:var(--card);border:1px solid var(--brd);color:var(--td);transition:all .15s;display:flex;align-items:center;gap:6px}
.fc:hover{border-color:var(--bl);color:var(--ts)}
.fc.on{background:var(--accent);border-color:var(--accent);color:#fff}
.fc .dot{width:7px;height:7px;border-radius:50%}
/* CARDS */
.rc{display:flex;gap:14px;padding:14px;background:var(--card);border:1px solid var(--brd);border-radius:11px;margin-bottom:8px;cursor:pointer;transition:all .2s;animation:fi .3s ease both}
.rc:hover{border-color:var(--bl);background:var(--el);transform:translateX(3px)}
@keyframes fi{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.pb{flex-shrink:0;border-radius:8px;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.pb::after{content:'';position:absolute;inset:0;border:1px solid rgba(255,255,255,0.06);border-radius:inherit}
.pb.movie{background:linear-gradient(145deg,#312e81,#4338ca)}.pb.tv{background:linear-gradient(145deg,#581c87,#7e22ce)}.pb.book{background:linear-gradient(145deg,#134e4a,#0f766e)}.pb.game{background:linear-gradient(145deg,#881337,#be123c)}.pb.anime{background:linear-gradient(145deg,#831843,#be185d)}.pb.music{background:linear-gradient(145deg,#713f12,#a16207)}
.pb img{width:100%;height:100%;object-fit:cover;border-radius:inherit}
.ri{flex:1;min-width:0}
.rt{display:flex;align-items:flex-start;justify-content:space-between;gap:8px;margin-bottom:3px}
.rn{font-family:'Fraunces',serif;font-size:16px;font-weight:600;letter-spacing:-0.3px;line-height:1.25}
.mb{padding:2px 8px;border-radius:4px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.7px;flex-shrink:0;white-space:nowrap}
.mb.movie{background:rgba(99,102,241,0.15);color:#6366f1}.mb.tv{background:rgba(168,85,247,0.15);color:#a855f7}.mb.book{background:rgba(20,184,166,0.15);color:#14b8a6}.mb.game{background:rgba(244,63,94,0.15);color:#f43f5e}.mb.anime{background:rgba(236,72,153,0.15);color:#ec4899}.mb.music{background:rgba(234,179,8,0.15);color:#eab308}
.rm{font-size:11.5px;color:var(--td);margin-bottom:6px}.rm .s{color:var(--bl);margin:0 4px}
.rs{font-size:12.5px;color:var(--ts);line-height:1.5;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;margin-bottom:8px}
.rf{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:4px}
.gt{display:flex;gap:4px;flex-wrap:wrap}.gt span{padding:2px 6px;background:var(--el);border-radius:4px;font-size:10.5px;color:var(--td)}
.rst{font-size:11px;color:var(--td);display:flex;align-items:center;gap:10px}
.sds{display:inline-flex;gap:2px;align-items:center}.sds i{width:6px;height:6px;border-radius:50%;font-style:normal;display:inline-block}.sds .l{background:var(--sl)}.sds .m{background:var(--sm)}.sds .h{background:var(--sh)}
/* DETAIL */
.dbk{color:var(--td);font-size:13px;padding:4px 0;margin-bottom:18px;display:inline-flex;align-items:center;gap:6px;transition:color .15s}.dbk:hover{color:var(--text)}
.dh{display:flex;gap:24px;margin-bottom:26px}
.dn{font-family:'Fraunces',serif;font-size:28px;font-weight:700;letter-spacing:-1.2px;line-height:1.12;margin:8px 0 6px}
.dd{font-size:14px;color:var(--ts);line-height:1.65;max-width:580px;margin:12px 0 16px}
.da{display:flex;gap:8px;flex-wrap:wrap}.da .p{padding:8px 18px;background:var(--accent);border-radius:7px;color:#fff;font-size:13px;font-weight:600}.da .o{padding:8px 18px;border:1px solid var(--brd);border-radius:7px;color:var(--ts);font-size:13px;font-weight:500}
.spb{display:flex;gap:10px;padding:14px;background:var(--card);border:1px solid var(--brd);border-radius:10px;margin-bottom:24px}
.sps{flex:1;text-align:center;padding:10px 8px;border-radius:8px}.sps em{font-size:22px;font-weight:700;font-style:normal;display:block}.sps small{font-size:10px;color:var(--td);text-transform:uppercase;letter-spacing:.8px}
.sps.sl{background:var(--slb)}.sps.sl em{color:var(--sl)}.sps.sm{background:var(--smb)}.sps.sm em{color:var(--sm)}.sps.sv{background:var(--shb)}.sps.sv em{color:var(--sh)}
.st{font-family:'Fraunces',serif;font-size:19px;font-weight:700;margin-bottom:14px}
.cmp{padding:14px;background:var(--card);border:1px solid var(--brd);border-radius:10px;margin-bottom:18px}
.cmp textarea{width:100%;min-height:68px;background:var(--el);border:1px solid var(--brd);border-radius:7px;padding:11px;color:var(--text);font-size:13px;resize:vertical;outline:none;font-family:inherit}
.cmp textarea:focus{border-color:rgba(255,107,53,0.5)}.cmp textarea::placeholder{color:var(--td)}
.cmpf{display:flex;align-items:center;justify-content:space-between;margin-top:9px;flex-wrap:wrap;gap:8px}
.spp{display:flex;gap:4px;align-items:center;flex-wrap:wrap}.spp>span{font-size:11px;color:var(--td);margin-right:3px}
.slb{padding:3px 9px;border-radius:100px;font-size:11px;font-weight:600;transition:all .15s}
.bps{padding:6px 15px;background:var(--accent);border-radius:7px;color:#fff;font-size:12.5px;font-weight:600}
.cfs{display:flex;gap:4px;margin-bottom:16px;align-items:center;flex-wrap:wrap}.cfs>span{font-size:11px;color:var(--td);margin-right:2px}
.cfb{padding:3px 9px;border-radius:100px;font-size:11px;font-weight:500;background:var(--card);border:1px solid var(--brd);color:var(--td);transition:all .15s}.cfb:hover{color:var(--ts)}.cfb.on{background:var(--el);color:var(--text);border-color:var(--bl)}
.cm{padding:14px;background:var(--card);border:1px solid var(--brd);border-radius:10px;margin-bottom:7px}.cm:hover{border-color:var(--bl)}
.cmh{display:flex;align-items:center;justify-content:space-between;margin-bottom:9px}.cmu{display:flex;align-items:center;gap:8px}
.av{width:28px;height:28px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#fff}
.cmn{font-size:12.5px;font-weight:600}.cmt{font-size:10.5px;color:var(--td)}
.sb{padding:2px 9px;border-radius:100px;font-size:10px;font-weight:700;text-transform:uppercase;letter-spacing:.7px}
.cmb{font-size:13.5px;line-height:1.6;color:var(--ts);transition:filter .3s}.cmb.bl{filter:blur(6px);user-select:none}
.rvb{display:flex;align-items:center;justify-content:center;gap:6px;padding:7px;margin-top:7px;background:var(--el);border-radius:7px;cursor:pointer;font-size:12px;font-weight:500;color:var(--td)}.rvb:hover{color:var(--text);background:var(--hov)}
.cmf{display:flex;gap:14px;margin-top:10px;font-size:12px;color:var(--td)}.cmf span{cursor:pointer}.cmf span:hover{color:var(--text)}
/* TRENDING */
.trc{display:flex;gap:12px;padding:14px;background:var(--card);border:1px solid var(--brd);border-radius:11px;margin-bottom:8px;transition:all .15s}
.trc:hover{border-color:var(--bl);background:var(--el)}
.trk{width:32px;height:32px;border-radius:8px;background:var(--agl);display:flex;align-items:center;justify-content:center;font-size:14px;font-weight:700;color:var(--accent);flex-shrink:0}
.tri{flex:1;min-width:0}
.trt{font-family:'Fraunces',serif;font-size:15px;font-weight:600;margin-bottom:2px}
.trm{font-size:11.5px;color:var(--td)}
.trd{padding:2px 8px;background:var(--agl);border-radius:100px;font-size:10px;font-weight:700;color:var(--accent);white-space:nowrap}
/* ARCHIVE */
.arcs{display:flex;gap:12px;padding:16px;background:var(--card);border:1px solid var(--brd);border-radius:10px;margin-bottom:20px;flex-wrap:wrap}
.arci{flex:1;min-width:80px;text-align:center;padding:8px}
.arci em{font-size:24px;font-weight:700;font-style:normal;display:block;color:var(--accent)}
.arci small{font-size:10px;color:var(--td);text-transform:uppercase;letter-spacing:.7px}
.arcg{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}
.arcd{padding:12px;background:var(--card);border:1px solid var(--brd);border-radius:9px;cursor:pointer;transition:all .15s;text-align:center}
.arcd:hover{border-color:var(--bl);background:var(--el);transform:translateY(-1px)}
.arcd.now{border-color:var(--accent)}
.arcd-dt{font-family:'Fraunces',serif;font-size:14px;font-weight:600;margin-bottom:2px}
.arcd-n{font-size:22px;font-weight:700;color:var(--accent)}
.arcd-l{font-size:10px;color:var(--td);margin-top:1px}
.arcd-t{display:flex;gap:2px;justify-content:center;margin-top:5px}.arcd-t span{font-size:10px}
.sect{font-family:'Fraunces',serif;font-size:17px;font-weight:700;margin-bottom:12px;margin-top:28px}
/* STREAMS */
.shd p{color:var(--td);font-size:14px;margin-bottom:28px;max-width:460px}
.sg{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:9px}
.sc{padding:16px;background:var(--card);border:1px solid var(--brd);border-radius:10px;transition:all .2s}.sc:hover{border-color:var(--bl);transform:translateY(-2px)}
.sct{display:flex;align-items:flex-start;justify-content:space-between;margin-bottom:9px}
.si{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:17px;background:var(--agl)}
.ssb{padding:4px 11px;border-radius:100px;font-size:11px;font-weight:600;border:1px solid var(--brd);color:var(--td)}.ssb:hover{border-color:var(--accent);color:var(--accent)}.ssb.on{background:var(--accent);border-color:var(--accent);color:#fff}
.sc h3{font-size:13.5px;font-weight:600;margin-bottom:3px}.sc p{font-size:11.5px;color:var(--td);line-height:1.4;margin-bottom:8px}
.scs{display:flex;gap:12px;font-size:11px;color:var(--td)}
.empty{text-align:center;padding:60px 20px;color:var(--td)}.empty h2{font-family:'Fraunces',serif;font-size:22px;color:var(--ts);margin-bottom:8px}
@media(max-width:640px){.nav{padding:0 12px}.tabs{display:none}.page{padding:18px 12px 50px}h1.hero{font-size:26px}.dh{flex-direction:column;gap:14px}.dn{font-size:24px}.sg{grid-template-columns:1fr}.rc{gap:10px}.arcg{grid-template-columns:repeat(auto-fill,minmax(95px,1fr))}}
</style>
</head>
<body>
<nav class="nav"><div class="nav-l"><div class="logo" onclick="go('feed')"><i>U</i><span>unreeled</span></div><div class="tabs"><button class="tab on" data-p="feed" onclick="go('feed')">Releases</button><button class="tab" data-p="trending" onclick="go('trending')">Trending</button><button class="tab" data-p="archive" onclick="go('archive')">Archive</button><button class="tab" data-p="streams" onclick="go('streams')">Streams</button></div></div><div><button class="btn-a">Sign Up</button></div></nav>
<div id="p-feed" class="page on"></div>
<div id="p-detail" class="page"></div>
<div id="p-trending" class="page"></div>
<div id="p-archive" class="page"></div>
<div id="p-streams" class="page"></div>
<script>
const D=__RELEASE_DATA_PLACEHOLDER__;
const MC={movie:{i:"\uD83C\uDFAC",l:"Film",c:"#6366f1"},tv:{i:"\uD83D\uDCFA",l:"TV",c:"#a855f7"},book:{i:"\uD83D\uDCD6",l:"Book",c:"#14b8a6"},game:{i:"\uD83C\uDFAE",l:"Game",c:"#f43f5e"},anime:{i:"\uD83C\uDF8C",l:"Anime",c:"#ec4899"},music:{i:"\uD83C\uDFB5",l:"Music",c:"#eab308"}};
const SP={none:{l:"No Spoilers",bg:"var(--el)",c:"var(--td)",b:"var(--brd)"},light:{l:"\uD83D\uDFE2 Light",bg:"var(--slb)",c:"var(--sl)",b:"var(--slr)"},medium:{l:"\uD83D\uDFE1 Medium",bg:"var(--smb)",c:"var(--sm)",b:"var(--smr)"},heavy:{l:"\uD83D\uDD34 Heavy",bg:"var(--shb)",c:"var(--sh)",b:"var(--shr)"}};
const CMT=[{id:1,u:"stellarfan",av:"SF",cl:"#6366f1",tm:"2h ago",sl:"none",up:234,b:"Just finished this. The performances are incredible and the whole thing is breathtaking. One of the best this year."},{id:2,u:"cosmicreader",av:"CR",cl:"#14b8a6",tm:"1h ago",sl:"light",up:189,b:"The opening sets the tone perfectly. The way they establish the rivalry in the first twenty minutes is masterful."},{id:3,u:"plottwister",av:"PT",cl:"#a855f7",tm:"45m ago",sl:"medium",up:156,b:"The midpoint reveal completely reframes everything. All those details from the first half click into place."},{id:4,u:"endgamespoils",av:"ES",cl:"#f43f5e",tm:"30m ago",sl:"heavy",up:412,b:"That final twist broke me. The last scene will stay with me for weeks. The post-credits moment changes EVERYTHING."},{id:5,u:"deepdiver",av:"DD",cl:"#f59e0b",tm:"20m ago",sl:"none",up:98,b:"Exactly the thoughtful storytelling we need. The most gripping thing here is quiet tension and brilliant writing."},{id:6,u:"astridwrites",av:"AW",cl:"#ec4899",tm:"15m ago",sl:"light",up:67,b:"The supporting cast elevates this. The mentor subplot adds depth. The team cares about every character."}];
const STM=[{t:"Platforms & Studios",items:[{n:"A24 Releases",i:"\uD83C\uDFAC",d:"Every A24 theatrical and streaming release",f:"~8/mo",s:"24.1k",on:1},{n:"HBO Originals",i:"\uD83D\uDCFA",d:"New episodes and premieres across HBO",f:"~15/mo",s:"41.8k",on:0},{n:"Crunchyroll Simulcasts",i:"\uD83C\uDF8C",d:"Every new simulcast episode as it airs",f:"~40/mo",s:"38.2k",on:1},{n:"Netflix Originals",i:"\uD83D\uDCFA",d:"Every Netflix original film and series",f:"~30/mo",s:"67.3k",on:0},{n:"PlayStation Exclusives",i:"\uD83C\uDFAE",d:"First-party and exclusive PS5 launches",f:"~4/mo",s:"19.5k",on:0},{n:"Tor Books",i:"\uD83D\uDCD6",d:"New fantasy and sci-fi from Tor",f:"~12/mo",s:"11.2k",on:0},{n:"Napalm Records",i:"\uD83C\uDFB5",d:"New metal and rock from Napalm",f:"~10/mo",s:"8.7k",on:0}]},{t:"Genres",items:[{n:"Horror (All Media)",i:"\uD83D\uDD2A",d:"Horror across all media types",f:"~18/mo",s:"22.6k",on:1},{n:"Sci-Fi (All Media)",i:"\uD83D\uDE80",d:"Science fiction across all media",f:"~20/mo",s:"31.4k",on:0},{n:"Fantasy (All Media)",i:"\u2694\uFE0F",d:"Fantasy across all media types",f:"~22/mo",s:"28.7k",on:0},{n:"New Vinyl",i:"\uD83C\uDFB5",d:"Latest vinyl pressings across genres",f:"~15/mo",s:"14.3k",on:0}]},{t:"Series & Franchises",items:[{n:"Golden Kamuy",i:"\uD83C\uDF8C",d:"Final season and manga releases",f:"Weekly",s:"15.2k",on:0},{n:"My Hero Academia",i:"\uD83C\uDF8C",d:"Main series, Vigilantes, spin-offs",f:"Weekly+",s:"34.1k",on:0},{n:"Fate Series",i:"\uD83C\uDF8C",d:"All Fate anime, movies, games",f:"Varies",s:"21.8k",on:0}]}];

let cf="all",cr=null,ccf="all",rv=new Set();
let vd=D.latest_date||"",R=(D.latest?D.latest.releases:D.releases)||[];
const dates=D.dates_available||[vd];

function go(p){document.querySelectorAll('.page').forEach(x=>x.classList.remove('on'));document.getElementById('p-'+p).classList.add('on');document.querySelectorAll('.tab').forEach(t=>t.classList.remove('on'));document.querySelector('.tab[data-p="'+(p==='detail'?'feed':p)+'"]')?.classList.add('on');window.scrollTo({top:0,behavior:'smooth'})}
function esc(s){if(!s)return'';const d=document.createElement('div');d.textContent=s;return d.innerHTML}
function meta(r){const m=r.metadata||{},p=[];if(r.media_type==='movie'){if(m.runtime_minutes)p.push(m.runtime_minutes+' min');if(m.original_language)p.push(m.original_language.toUpperCase())}if(r.media_type==='tv'&&m.networks?.length)p.push(m.networks[0]);if(r.media_type==='game'&&m.platforms?.length)p.push(m.platforms[0]);if(r.media_type==='anime'){if(m.studios?.length)p.push(m.studios[0]);if(m.score)p.push('\u2605 '+m.score)}if(r.media_type==='book'){if(m.authors?.length)p.push(m.authors[0]);if(m.publisher)p.push(m.publisher);if(m.page_count)p.push(m.page_count+'pp')}if(r.media_type==='music'){if(m.artists?.length)p.push(m.artists[0]);if(m.formats?.length)p.push(m.formats.join(', '));if(m.labels?.length&&m.labels[0]!=='[no label]')p.push(m.labels[0]);if(m.track_count)p.push(m.track_count+' tracks')}return p.join('<span class="s">\u00B7</span>')}
function poster(r,w,h,fs){const t=r.media_type,c=MC[t]||MC.movie;if(r.poster_url)return'<div class="pb '+t+'" style="width:'+w+'px;height:'+h+'px"><img src="'+esc(r.poster_url)+'" alt="" loading="lazy" onerror="this.parentElement.innerHTML=\''+c.i+'\';this.remove()"></div>';return'<div class="pb '+t+'" style="width:'+w+'px;height:'+h+'px;font-size:'+fs+'px">'+c.i+'</div>'}
function fmtD(d){try{return new Date(d+'T12:00:00').toLocaleDateString('en-US',{weekday:'short',month:'short',day:'numeric',year:'numeric'})}catch(e){return d}}
function dayN(d){try{return new Date(d+'T12:00:00').toLocaleDateString('en-US',{weekday:'long'})}catch(e){return''}}

function loadDate(d){vd=d;R=(D.historical&&D.historical[d])?D.historical[d]:(D.latest&&D.latest.date===d)?D.latest.releases:[];cf="all";renderFeed()}

function card(r,i,oc){const c=MC[r.media_type]||MC.movie,sp=r.spoiler_counts||{},hs=(sp.light||0)+(sp.medium||0)+(sp.heavy||0)>0;let dots='';if(hs){dots='<span class="sds">';if(sp.light)dots+='<i class="l"></i>';if(sp.medium)dots+='<i class="m"></i>';if(sp.heavy)dots+='<i class="h"></i>';dots+='</span> Spoilers'}const gt=(r.genres||[]).slice(0,3).map(g=>'<span>'+esc(g)+'</span>').join('');return'<div class="rc" onclick="'+oc+'" style="animation-delay:'+Math.min(i*.03,.3)+'s">'+poster(r,68,95,24)+'<div class="ri"><div class="rt"><div class="rn">'+esc(r.title)+'</div><span class="mb '+r.media_type+'">'+c.l+'</span></div><div class="rm">'+meta(r)+'</div>'+(r.synopsis?'<p class="rs">'+esc(r.synopsis)+'</p>':'')+'<div class="rf"><div class="gt">'+gt+'</div><div class="rst"><span>\uD83D\uDCAC '+(r.comment_count||0)+'</span>'+(hs?'<span>'+dots+'</span>':'')+'</div></div></div></div>'}

// ═══════ FEED ═══════
function renderFeed(){
  const cn={};R.forEach(r=>cn[r.media_type]=(cn[r.media_type]||0)+1);
  const fl=cf==='all'?R:R.filter(r=>r.media_type===cf);
  const isL=vd===D.latest_date;
  let h='<h1 class="hero">'+(isL?'Today in Media':'Releases')+'</h1>';
  // Date picker
  h+='<div class="dp">';
  const ci=dates.indexOf(vd);
  if(ci<dates.length-1)h+='<button class="dp-btn" onclick="loadDate(\''+dates[ci+1]+'\')">\u2190</button>';
  if(dates.length>1){h+='<select onchange="loadDate(this.value)">';dates.forEach(d=>{h+='<option value="'+d+'"'+(d===vd?' selected':'')+'>'+fmtD(d)+(d===D.latest_date?' (latest)':'')+'</option>'});h+='</select>'}else{h+='<span class="dp-single">'+fmtD(vd)+'</span>'}
  if(ci>0)h+='<button class="dp-btn" onclick="loadDate(\''+dates[ci-1]+'\')">\u2192</button>';
  h+='</div>';
  h+='<p class="sub">'+dayN(vd)+' \u2014 <b>'+R.length+' releases</b></p>';
  h+='<div class="fbar"><button class="fc '+(cf==='all'?'on':'')+'" onclick="cf=\'all\';renderFeed()">All ('+R.length+')</button>';
  for(const[t,c]of Object.entries(MC)){if(cn[t]){const dot=cf!==t?'<span class="dot" style="background:'+c.c+'"></span>':'';h+='<button class="fc '+(cf===t?'on':'')+'" onclick="cf=\''+t+'\';renderFeed()">'+dot+c.l+' ('+cn[t]+')</button>'}}
  h+='</div>';
  if(!fl.length)h+='<div class="empty"><h2>No releases found</h2><p>Try a different filter or date.</p></div>';
  fl.forEach((r,i)=>{h+=card(r,i,'openD('+i+')')});
  document.getElementById('p-feed').innerHTML=h}

// ═══════ DETAIL ═══════
function openD(i){cr=R[i];rv=new Set();ccf='all';const r=cr,c=MC[r.media_type]||MC.movie,sp=r.spoiler_counts||{};let h='<button class="dbk" onclick="go(\'feed\')">\u2190 Back</button><div class="dh">'+poster(r,150,210,48)+'<div style="flex:1"><span class="mb '+r.media_type+'">'+c.l+'</span><h1 class="dn">'+esc(r.title)+'</h1><div class="rm">'+meta(r)+(r.genres?.length?'<span class="s">\u00B7</span>'+r.genres.map(esc).join(', '):'')+'</div>'+(r.synopsis?'<p class="dd">'+esc(r.synopsis)+'</p>':'')+'<div class="da"><button class="p">\uD83D\uDCE1 Follow</button><button class="o">\uD83D\uDD17 Share</button><button class="o">\u2B50 Watchlist</button></div></div></div><div class="spb"><div class="sps sl"><em>'+(sp.light||0)+'</em><small>Light</small></div><div class="sps sm"><em>'+(sp.medium||0)+'</em><small>Medium</small></div><div class="sps sv"><em>'+(sp.heavy||0)+'</em><small>Heavy</small></div></div><div class="st">Discussion ('+(r.comment_count||0)+')</div><div class="cmp"><textarea placeholder="Share your thoughts..."></textarea><div class="cmpf"><div class="spp"><span>Spoiler level:</span><button class="slb" style="border:1px solid var(--brd);color:var(--td);background:var(--el)" onclick="selSp(this)">No Spoilers</button><button class="slb" style="border:1px solid var(--slr);color:var(--sl)" onclick="selSp(this)">\uD83D\uDFE2 Light</button><button class="slb" style="border:1px solid var(--smr);color:var(--sm)" onclick="selSp(this)">\uD83D\uDFE1 Medium</button><button class="slb" style="border:1px solid var(--shr);color:var(--sh)" onclick="selSp(this)">\uD83D\uDD34 Heavy</button></div><button class="bps">Post</button></div></div><div class="cfs"><span>Show:</span><button class="cfb on" onclick="fC(\'all\',this)">All</button><button class="cfb" onclick="fC(\'none\',this)">No Spoilers</button><button class="cfb" onclick="fC(\'light\',this)">\uD83D\uDFE2 Light</button><button class="cfb" onclick="fC(\'medium\',this)">\uD83D\uDFE1 Medium</button><button class="cfb" onclick="fC(\'heavy\',this)">\uD83D\uDD34 Heavy</button></div><div id="cml"></div>';document.getElementById('p-detail').innerHTML=h;rCmt();go('detail')}
function rCmt(){const f=ccf==='all'?CMT:CMT.filter(c=>c.sl===ccf);document.getElementById('cml').innerHTML=f.map(c=>{const s=SP[c.sl],hs=c.sl!=='none',ir=rv.has(c.id),bl=hs&&!ir;return'<div class="cm"><div class="cmh"><div class="cmu"><div class="av" style="background:'+c.cl+'">'+c.av+'</div><div><div class="cmn">'+c.u+'</div><div class="cmt">'+c.tm+'</div></div></div><span class="sb" style="background:'+s.bg+';color:'+s.c+';border:1px solid '+s.b+'">'+s.l+'</span></div><div class="cmb'+(bl?' bl':'')+'">'+esc(c.b)+'</div>'+(bl?'<div class="rvb" onclick="rv.add('+c.id+');rCmt()">\uD83D\uDC41 Reveal '+c.sl+' spoiler</div>':'')+'<div class="cmf"><span>\u25B2 '+c.up+'</span><span>\u25BC</span><span>\uD83D\uDCAC Reply</span><span>\uD83D\uDD16 Save</span></div></div>'}).join('')}
function fC(f,b){ccf=f;document.querySelectorAll('.cfb').forEach(x=>x.classList.remove('on'));b.classList.add('on');rCmt()}
function selSp(b){document.querySelectorAll('.slb').forEach(x=>x.style.background='transparent');const m={'No Spoilers':'var(--el)','\uD83D\uDFE2 Light':'var(--slb)','\uD83D\uDFE1 Medium':'var(--smb)','\uD83D\uDD34 Heavy':'var(--shb)'};b.style.background=m[b.textContent]||'transparent'}

// ═══════ TRENDING ═══════
function renderTrending(){
  const tr=D.trending||[];
  let h='<h1 class="hero">\uD83D\uDD25 Trending</h1><p class="sub">Titles generating buzz across multiple days</p>';
  if(!tr.length){h+='<div class="empty"><h2>Not enough data yet</h2><p>Trending builds up as the pipeline runs daily. Check back soon!</p></div>'}
  else{tr.forEach((t,i)=>{const c=MC[t.media_type]||MC.movie,mp=[],m=t.metadata||{};if(m.artists?.length)mp.push(m.artists[0]);if(m.authors?.length)mp.push(m.authors[0]);if(m.studios?.length)mp.push(m.studios[0]);if(m.networks?.length)mp.push(m.networks[0]);const g=(t.genres||[]).slice(0,3).join(', ');if(g)mp.push(g);
  h+='<div class="trc"><div class="trk">'+(i+1)+'</div>'+poster(t,56,78,20)+'<div class="tri"><div style="display:flex;align-items:center;gap:8px;margin-bottom:2px"><div class="trt">'+esc(t.title)+'</div><span class="mb '+t.media_type+'">'+c.l+'</span></div><div class="trm">'+mp.join('<span class="s">\u00B7</span>')+'</div>'+(t.synopsis?'<p class="rs" style="margin:4px 0">'+esc(t.synopsis)+'</p>':'')+'</div><div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px;flex-shrink:0">'+(t.days_seen>1?'<span class="trd">\uD83D\uDD25 '+t.days_seen+' days</span>':'')+(t.comment_count?'<span style="font-size:11px;color:var(--td)">\uD83D\uDCAC '+t.comment_count+'</span>':'')+'</div></div>'})}
  document.getElementById('p-trending').innerHTML=h}

// ═══════ ARCHIVE ═══════
function renderArchive(){
  const a=D.archive||{dates:[],weekly:[],monthly:[]},ds=a.dates||[],wk=a.weekly||[],mo=a.monthly||[];
  let h='<h1 class="hero">\uD83D\uDCC5 Archive</h1><p class="sub">Browse past releases by day, week, or month</p>';
  if(ds.length){
    const tot=ds.reduce((s,d)=>s+d.total,0),avg=Math.round(tot/ds.length);
    h+='<div class="arcs"><div class="arci"><em>'+ds.length+'</em><small>Days</small></div><div class="arci"><em>'+tot.toLocaleString()+'</em><small>Releases</small></div><div class="arci"><em>'+avg+'</em><small>Avg/day</small></div></div>'}
  if(mo.length){h+='<div class="sect" style="margin-top:0">\uD83D\uDCC6 Monthly</div><div class="sg">';mo.forEach(m=>{const ti=Object.keys(m.types||{}).map(t=>(MC[t]||{}).i||'').filter(Boolean).join(' ');h+='<div class="sc"><div class="sct"><div class="si">\uD83D\uDCC6</div><span style="font-size:11px;color:var(--td)">'+m.days+' days</span></div><h3>'+m.month+'</h3><p>'+m.total.toLocaleString()+' releases</p><div class="scs">'+ti+'</div></div>'});h+='</div>'}
  if(wk.length){h+='<div class="sect">\uD83D\uDCC5 Weekly</div><div class="sg">';wk.forEach(w=>{const ti=Object.keys(w.types||{}).map(t=>(MC[t]||{}).i||'').filter(Boolean).join(' ');h+='<div class="sc"><div class="sct"><div class="si">\uD83D\uDCC5</div><span style="font-size:11px;color:var(--td)">'+w.days+' days</span></div><h3>'+w.week+'</h3><p>'+w.total.toLocaleString()+' releases</p><div class="scs">'+ti+'</div></div>'});h+='</div>'}
  h+='<div class="sect">\uD83D\uDCC4 Daily</div>';
  if(!ds.length){h+='<div class="empty"><h2>No archive data yet</h2><p>Data builds as the pipeline runs daily.</p></div>'}
  else{h+='<div class="arcg">';ds.slice().reverse().forEach(d=>{const il=d.date===D.latest_date,ti=Object.keys(d.types||{}).map(t=>'<span>'+(MC[t]||{}).i+'</span>').join('');h+='<div class="arcd'+(il?' now':'')+'" onclick="loadDate(\''+d.date+'\');go(\'feed\')"><div class="arcd-dt">'+d.date.slice(5)+'</div><div class="arcd-n">'+d.total+'</div><div class="arcd-l">releases</div><div class="arcd-t">'+ti+'</div></div>'});h+='</div>'}
  document.getElementById('p-archive').innerHTML=h}

// ═══════ STREAMS ═══════
function renderStreams(){let h='<div class="shd"><h1 class="hero">Your Streams</h1><p>Subscribe to genres, platforms, franchises, and series for a daily digest.</p></div>';STM.forEach((s,si)=>{h+='<h3 class="sect"'+(si===0?' style="margin-top:0"':'')+'>'+s.t+'</h3><div class="sg">';s.items.forEach(x=>{h+='<div class="sc"><div class="sct"><div class="si">'+x.i+'</div><button class="ssb'+(x.on?' on':'')+'" onclick="this.classList.toggle(\'on\');this.textContent=this.classList.contains(\'on\')?\'\u2713 Subscribed\':\'Subscribe\'">'+(x.on?'\u2713 Subscribed':'Subscribe')+'</button></div><h3>'+x.n+'</h3><p>'+x.d+'</p><div class="scs"><span>\uD83D\uDCE6 '+x.f+'</span><span>\uD83D\uDC65 '+x.s+' subs</span></div></div>'});h+='</div>'});document.getElementById('p-streams').innerHTML=h}

document.addEventListener('DOMContentLoaded',()=>{renderFeed();renderTrending();renderArchive();renderStreams()});
</script>
</body>
</html>
